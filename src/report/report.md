# DO5_SimpleDocker

## Part 1. Готовый докер

![image.png](image.png)

1 - Скачивание докер-образ  **nginx**

![image.png](image%201.png)

2 - Проверка наличия докер-образа

![image.png](image%202.png)

3 -Запуск докер-образ 

![image.png](image%203.png)

4 - Проверка запуска образа

![image.png](image%204.png)

5 - Размер контейнера

![image.png](image%205.png)

6 - Запамленные порты

![image.png](image%206.png)

7 - ip контейнера

### 

![image.png](image%207.png)

8 - Остановка докер контейнера

![image.png](image%208.png)

9 -Проверка остановки контейнера

![image.png](image%209.png)

10 - Запуск докера с портами 80 и 443 в контейнере, замапленными на такие же порты на локальной машине, через команду *run*.

![image.png](image%2010.png)

11 - Проверка, что в браузере по адресу *localhost:80* доступна стартовая страница **nginx**

![image.png](image%2011.png)

12 - Перезапуск и проверка докер контейнера 

### 

## Part 2. Операции с контейнером

![image.png](image%2012.png)

1 -конфигурационный файл *nginx.conf* внутри докер контейнера

![image.png](image%2013.png)

2 - Создание на локальной машине файла *nginx.conf*

![image.png](image%2014.png)

3 - создаем файл *nginx.conf* внутрь докер-образа через команду `docker cp`

![image.png](image%2015.png)

4 - Перезапуск **nginx** внутри докер-образа через команду *exec*

![image.png](image%2016.png)

5 -Проверка по адресу [*localhost:80/status](http://localhost:80/statusб), что* отдается страничка со статусом сервера **nginx**

![image.png](image%2017.png)

6 - Экспортирование контейнера в файл архив *.tar* через команду *export*

![image.png](image%2018.png)

7 - Остановка контейнера

![image.png](image%2019.png)

8 - Удали образа через `docker rmi [image_id|repository]`, не удаляя перед этим контейнеры.

Затем удаление остановленного контейнера

![image.png](image%2020.png)

9 - Импортирование контейнера обратно через команду *import*

![image.png](image%2021.png)

10 - Запуск импортированного контейнера

![image.png](image%2022.png)

11 -Проверка, что по адресу *localhost:80/status* отдается страничка со статусом сервера **nginx**.

## Part 3. Мини веб-сервер

![image.png](image%2023.png)

1 - Обновление библиотек

![image.png](image%2024.png)

2 - мини-сервер на **C** и **FastCgi**, который возвращает простейшую страничку с надписью `Hello World!`

![image.png](image%2025.png)

3- Запуск  мини-сервер через *spawn-fcgi* на порту 8080

![image.png](image%2026.png)

*4 - nginx.conf*, который  проксирует все запросы с 81 порта на *127.0.0.1:8080*.

![image.png](image%2027.png)

5 - Копирование файла *nginx.conf внутрь контейнера*

![image.png](image%2028.png)

6 - Проверка, что в браузере по *localhost:81* отдается страничка

## Part 4. Свой докер

### 

![image.png](image%2029.png)

![image.png](image%2030.png)

1 -Докер-образ, который:

1) собирает исходники мини сервера на FastCgi;

2) запускает его на 8080 порту;

3) копирует внутрь образа написанный *./nginx/nginx.conf*;

4) запускает **nginx**.

![image.png](image%2031.png)

2 - сборка докер-образа через `docker build` при этом указав имя и тег

![image.png](image%2032.png)

3 - Проверка через `docker images`, что все собралось корректно.

![image.png](image%2033.png)

4 - Запуск собранный докер-образ с маппингом 81 порта на 80 на локальной машине и маппингом папки *./nginx* внутрь контейнера по адресу, где лежат конфигурационные файлы **nginx**'а 

![image.png](image%2034.png)

5 - Проверка, что по localhost:80 доступна страничка написанного мини сервера

![image.png](image%2035.png)

6 - Добавление в *./nginx/nginx.conf* проксирование странички */status*, по которой отдавается статус сервера **nginx**

![image.png](image%2036.png)

7 - Перезапуск докер-образа

![image.png](image%2037.png)

8 - Проверка, что теперь по *localhost:80/status* отдается страничка со статусом **nginx**

## Part 5. **Dockle**

![image.png](image%2038.png)

1 - сканирование образа из предыдущего задания через `dockle [image_id|repository]`

![image.png](image%2039.png)

2 - Выделение корректировок докерфайла

![image.png](image%2040.png)

3 - Исправленный образ  при проверке через **dockle** устранены ошибки и предупреждения

## Part 6. Базовый **Docker Compose**

![image.png](image%2041.png)

1- файл *docker-compose.yml*, с помощью которого:

1) Поднимается докер-контейнер *(он должен работать в локальной сети, т. е. не нужно использовать инструкцию **EXPOSE** и мапить порты на локальную машину)*.

2) Поднимается докер-контейнер с **nginx**, который будет проксировать все запросы с 8080 порта на 81 порт первого контейнера.

### 

![image.png](image%2042.png)

![image.png](image%2043.png)

2  - Сборка и запуск проекта с помощью команд `docker-compose build` и `docker-compose up`.

![image.png](image%2034.png)

3 - Проверка, что по localhost доступна страничка 

###